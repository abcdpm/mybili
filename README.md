
åŒæ­¥æ”¶è—å¤¹ä¿¡æ¯ æ›´æ–°æ”¶è—å¤¹æœ¬èº«çš„å…ƒæ•°æ®ï¼ˆå¦‚æ ‡é¢˜ã€åª’ä½“æ•°é‡ç­‰ï¼‰ï¼š
php artisan app:update-fav --update-fav
php artisan app:update-fav --update-fav=1
æ›´æ–°æ”¶è—å¤¹å°é¢å›¾ï¼š
php artisan app:scan-cover-image --target=favorite

åŒæ­¥æ”¶è—å¤¹è§†é¢‘ä¿¡æ¯ï¼š
php artisan app:update-fav --update-fav-videos=1
php artisan app:update-fav --update-fav-videos
æŸ¥çœ‹æ”¶è—å¤¹è§†é¢‘ä¿¡æ¯æ•°æ®é‡ï¼š
php artisan tinker --execute="echo App\Models\VideoPart::count();"

æ‰«ææ•°æ®åº“ä¸­å·²æœ‰çš„è®°å½•å»ä¸‹è½½æ–‡ä»¶ï¼š
php artisan app:update-fav --download-video-part=1

æ‰‹åŠ¨å…¨é‡è§†é¢‘è½¬ç ï¼š
php artisan app:transcode-all
php artisan app:transcode-all --force

æ‰‹åŠ¨å…¨é‡è§†é¢‘å¯è¯»æ–‡ä»¶åï¼š
php artisan app:make-human-readable-names

åˆ é™¤Redisè„æ•°æ®ï¼š
php artisan tinker
\Illuminate\Support\Facades\Redis::del('video_list');

è§¦å‘å…¨é‡è§†é¢‘è¯„è®ºå¤‡ä»½ï¼š
php artisan app:download-all-comment
php artisan app:download-all-comment --limit=60 --force

æ¸…ç©ºç§¯å‹çš„ Jobï¼š
php artisan horizon:clear
php artisan queue:flush


## ğŸ¥ Mybili

**bilibili æ”¶è—å¤¹ä¸‹è½½å·¥å…·** - ä½ çš„NASä¸­å¿…ä¸å¯å°‘çš„ç¨‹åº

<img src="./mybili.png" alt="Mybili Logo" width="256" height="256" />

## ğŸ“± ç¤¾åŒºäº¤æµ

åŠ å…¥æˆ‘ä»¬çš„ Telegram ç¾¤ç»„ï¼Œä¸å…¶ä»–ç”¨æˆ·äº¤æµä½¿ç”¨å¿ƒå¾—ï¼Œè·å–æœ€æ–°æ›´æ–°å’Œå¸®åŠ©ï¼š

ğŸ”— **[åŠ å…¥ Telegram ç¾¤ç»„](https://t.me/+SqAyFZfxF7dmNjk1)**

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- â° å®šæ—¶5åˆ†é’Ÿè·å–ä½ çš„æ”¶è—å¤¹æ‰€æœ‰è§†é¢‘ï¼Œç¼“å­˜æ ‡é¢˜ã€æè¿°ã€å°é¢ç­‰é‡è¦ä¿¡æ¯
- ğŸš€ è‡ªåŠ¨é€šè¿‡é˜Ÿåˆ—ï¼Œå°†ä½ æ”¶è—çš„è§†é¢‘æŒ‰ç…§æœ€é«˜ç”»è´¨ä¸‹è½½ä¸€ä»½åˆ°æœ¬åœ°
- ğŸ“º æä¾›å‹å¥½çš„ web é¡µé¢å±•ç¤ºä½ çš„æ”¶è—å¤¹åˆ—è¡¨ä¿¡æ¯ï¼Œä»¥åŠè¿›è¡Œåœ¨çº¿æ’­æ”¾é¢„è§ˆ
- ğŸ¯ æ”¯æŒè§†é¢‘åˆ†På’Œå¼¹å¹•å…¨é‡ç¼“å­˜åˆ°æœ¬åœ°ï¼Œå¯ä»¥åœ¨çº¿æ’­æ”¾ä»¥åŠè£…è½½å¼¹å¹•é¢„è§ˆ
- ğŸ“‚ æ”¯æŒç”Ÿæˆå¤šåª’ä½“å¯è¯»ç›®å½•æ–‡ä»¶ï¼Œé€‚é… emby ç­‰åª’ä½“åº“
- ğŸ“¡ æ”¯æŒæ·»åŠ è®¢é˜…åŠŸèƒ½ï¼Œä»¥å¯¹åˆé›†ã€UPä¸»è¿›è¡Œè®¢é˜…ï¼Œè‡ªåŠ¨å‘ç°æ–°è§†é¢‘ä¸‹è½½

## ğŸ–¼ï¸ é¢„è§ˆ

ğŸŒ **[åœ¨çº¿é¢„è§ˆ](https://mybili.eller.top/)**

![preview](./preview.png)
![preview0](./preview0.png)
![preview1](./preview1.png)

## ğŸ“š ä½¿ç”¨æ–¹æ³•

è¯¥æ¼”ç¤ºä»¥æœ€å…¬å…±ç®€å•çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œè®©ä½ èƒ½å¤Ÿå¿«é€Ÿçš„ä½“éªŒåˆ°ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…çš„éœ€æ±‚å’Œç°å®ä¿®æ”¹å…¶ä¸­é…ç½®å’Œéƒ¨ç½²æ–¹å¼ã€‚

- ğŸ’¾ ç¨‹åºä¾èµ– redis æ¥è¿›è¡Œå¿…è¦çš„ç¼“å­˜å’Œåˆ†å‘å¤„ç†å¼‚æ­¥ä»»åŠ¡
- ğŸ’¿ é»˜è®¤å°†é‡‡ç”¨ sqlite æ•°æ®åº“å­˜å‚¨æ”¶è—å¤¹ã€è§†é¢‘ã€å¼¹å¹•ç­‰æ–‡æœ¬å‹ä¿¡æ¯
- ğŸ“‚ è§†é¢‘ã€å›¾ç‰‡å°†æŒ‰ç…§è§„åˆ™å­˜å‚¨åˆ°ä½ é¢„è®¾çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­

### ğŸ³ 1. é€šè¿‡ docker éƒ¨ç½²äºä½  nas

#### ğŸ“ åˆ›å»ºå­˜å‚¨ç›®å½•
å»ºè®®ä¸ºä½ å°†è¦ç¼“å­˜çš„è§†é¢‘èµ„æºåˆ›å»ºç›®å½•ï¼Œç¨åå°†ä¸ºå…¶æ˜ å°„è·¯å¾„è€Œä¸æ˜¯é€šè¿‡ docker-compose ç®¡ç†ï¼Œç›®çš„æ˜¯æ›´æ–¹ä¾¿çš„å…è®¸å¤–éƒ¨ä½¿ç”¨ã€‚

| ğŸ’¡ å¦‚æœä½ ç†Ÿæ‚‰ Docker é…ç½®ï¼Œå¯ä»¥è‡ªç”±æ›´æ”¹

```bash
mkdir /mnt/user/mybili/data -p
```

#### ğŸ“ åˆ›å»º docker æœåŠ¡é…ç½®

åˆ›å»ºæ–‡ä»¶ `/mnt/user/mybili/docker-compose.yml`

- ğŸ”Œ å®¹å™¨å†…éƒ¨ç«¯å£ 80(http) å’Œ 443(https) éƒ½å¯ä»¥ä½¿ç”¨
- âš™ï¸ ä¸‹åˆ— env ç¯å¢ƒå˜é‡å‡å¯ä»¥å‚è€ƒ .env.example æ–‡ä»¶å†…æœ‰çš„é¡¹è¿›è¡Œè¦†ç›–ï¼Œä½†é»˜è®¤åªå»ºè®®ä¿®æ”¹ç¤ºä¾‹ä¸­å†…å®¹

```yml
services: 
    mybili:
        image: ellermister/mybili
        ports:
            - "5151:80"
        volumes:
            - "./data:/app/storage/app/public"
            - db-data:/data

        environment:
            REDIS_HOST: redis
            REDIS_DB: 3
            DB_CONNECTION: sqlite
            DB_DATABASE: /data/database.sqlite
    redis:
        image: redis
        volumes:
            - redis-data:/data
        command: redis-server --save 60 1 --loglevel warning

volumes:
  db-data:
  redis-data:
```

#### ğŸš€ ä¸€é”®å¯åŠ¨
```bash
docker-compose up -d
```

#### ğŸ›‘ åœæ­¢è¿è¡Œ (å¦‚æœä½ éœ€è¦)
```bash
docker-compose down
```

### ğŸª 2. è·å– cookie

ä½ æœ‰ä¸¤ä¸ªæ–¹æ¡ˆå¯é€‰å…¶ä¸€

#### ğŸ“Œ æ–¹æ¡ˆ1 - æ‰‹åŠ¨

1. ğŸ”Œ åœ¨ä½ çš„æµè§ˆå™¨å®‰è£…æ’ä»¶
   [Get cookies.txt LOCALLY](https://chrome.google.com/webstore/detail/cclelndahbckbenkjhflpdbgdldlbecc)

2. ğŸ“¤ åœ¨ä½ ç™»å½•å“”å“©å“”å“©åï¼Œé€šè¿‡æ’ä»¶å¯¼å‡º cookie æ–‡ä»¶ã€‚éœ€è¦æ ¼å¼ä¸ºï¼š`Netscape`

3. ğŸŒ è®¿é—® `http://your-ip:5151/cookie`

4. â¬†ï¸ ä¸Šä¼  cookie æ–‡ä»¶ï¼Œç¨åå°†è‡ªåŠ¨å¼€å§‹åŒæ­¥ä½ çš„æ”¶è—å¤¹äº†ï¼ğŸ¡ğŸ¡ğŸ¡

#### ğŸ¤– æ–¹æ¡ˆ2 - è‡ªåŠ¨

ç”±äºæ–¹æ¡ˆ1ä¸Šä¼  cookie ä¼šè¯ä¹‹åï¼Œä¼šåœ¨å‡ å¤©ä¹‹åè‡ªåŠ¨è¿‡æœŸ, æ— æ³•å®ç°é•¿æœŸçš„è‡ªåŠ¨åŒæ­¥ã€‚

åŸå› æ˜¯å› ä¸ºç™»å½•çš„ç½‘é¡µç‰ˆ bilibili åœ¨åŒæœŸä½¿ç”¨æ—¶ï¼Œé‡æ–°è·å–äº†æ–°çš„çŸ­æœŸ tokenï¼Œè€Œ mybili å¹¶æ²¡æœ‰æ›´æ–°ï¼Œä¹Ÿæ²¡æœ‰æœºåˆ¶å»è‡ªåŠ¨è·å–æ–°çš„ tokenï¼Œå¦‚æœ mybili è‡ªå·±å»è·å–æ–°çš„ token ä¹Ÿä¼šå¯¼è‡´ä½ çš„ç½‘é¡µç‰ˆæœ¬æ‰çº¿ã€‚æ— è®ºæ˜¯ä»å®ç°å¤æ‚åº¦è¿˜æ˜¯ä½¿ç”¨ä½“éªŒæ¥è®ºéƒ½ä¸å¥½ã€‚

ç›®å‰å‚è€ƒä¸Šè¿°æ’ä»¶è·å– cookie å†…å®¹ï¼ŒåŠ ä»¥åŠ å·¥ï¼Œåˆ¶ä½œäº†ä¸€ä¸ªç®€å•çš„è‡ªåŠ¨åŒæ­¥ cookie chrome æ‰©å±•ï¼Œåªéœ€è¦å¡«å†™ä½ çš„ mybili ç½‘é¡µåœ°å€ã€‚å°±èƒ½å¤Ÿå®ç°è‡ªåŠ¨æ— æ„ŸçŸ¥è‡ªåŠ¨åŒæ­¥ cookie åˆ° mybiliã€‚

https://github.com/ellermister/mybili-cookie

1. ğŸ“¥ æ‰“å¼€é¡¹ç›®åœ°å€ï¼Œç‚¹å‡» "Code" -> "Download ZIP" ä¸‹è½½é¡¹ç›®
2. ğŸ“¦ å°†ä¸‹è½½çš„é¡¹ç›®è§£å‹åˆ°æœ¬åœ°ç›®å½•ï¼Œé•¿æœŸä½¿ç”¨è¯·åˆç†å®‰æ’ç›®å½•ä½ç½®ï¼Œå¦‚ `C:\mybili-cookie`
3. ğŸ”§ æ‰“å¼€ chrome æµè§ˆå™¨ `chrome://extensions/` æ‰“å¼€ "å¼€å‘äººå‘˜æ¨¡å¼"
4. ğŸ“‚ åŠ è½½è§£å‹ç¼©çš„æ‰©å±• é€‰æ‹©ç›®å½• `C:\mybili-cookie` ä»¥å¼€å¯æ‰©å±•
5. âš™ï¸ ç‚¹å‡»æ–°å®‰è£…çš„æ‰©å±•ï¼Œåœ¨å¼¹å‡ºçš„ popup.html é¡µé¢é‡Œå¡«å†™ä½ çš„ mybili åœ°å€ï¼Œæˆªè‡³åˆ°ç«¯å£å³å¯, å¦‚ `http://192.168.1.200:5151`


### âš™ï¸ 3. é…ç½®åŒæ­¥

åœ¨ç½‘é¡µè®¾ç½®é¡µé¢é…ç½®ä¸‹è½½é€‰é¡¹ï¼ˆé»˜è®¤å…³é—­åŒæ­¥ï¼‰ã€‚

è®¿é—®ï¼š`http://your-ip:5151/settings`

**ä¸»è¦è®¾ç½®é¡¹ï¼š**
- **æ”¶è—å¤¹åŒæ­¥**ï¼šæ€»å¼€å…³ï¼Œæ¯5åˆ†é’ŸåŒæ­¥æ”¶è—å¤¹ä¿¡æ¯
- **å¤šPä¸‹è½½**ï¼šä¸‹è½½è§†é¢‘æ‰€æœ‰åˆ†æ®µï¼Œå¦åˆ™ä»…ä¸‹è½½ç¬¬ä¸€ä¸ª
- **å¼¹å¹•ä¸‹è½½**ï¼šä¸‹è½½è§†é¢‘å¼¹å¹•åˆ°æ•°æ®åº“
- **è§†é¢‘ä¸‹è½½**ï¼šå…è®¸è§¦å‘è§†é¢‘æ–‡ä»¶ä¸‹è½½


### ğŸ“ 4. æ—¥å¿—æ’æŸ¥

åœ¨å®¹å™¨å†…éƒ¨ï¼Œå­˜å‚¨äº†å¤šä»½æ—¥å¿—ï¼Œæ¥æºäºä¸åŒçš„æœåŠ¡äº§ç”Ÿçš„æ–‡ä»¶ã€‚
```bash
/app # ls /var/log
queue.log.0        schedule.log.0     supervisord.log.0  web.log.0
```

#### ğŸŒ Web æœåŠ¡æ—¥å¿—
ç½‘é¡µä¸é€šæˆ–è€…å¼‚å¸¸æŠ¥é”™ï¼Œå¯ä»¥æŸ¥çœ‹ laravel çš„æ—¥å¿—
```bash
tail -f /app/storage/logs/laravel.log
```

## ğŸ”„ æ›´æ–°è¯´æ˜

ä½ å¯ä»¥åœ¨ github æˆ– docker hub æ£€è§†å¦‚æœå­˜åœ¨æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡æ‹‰å–æœ€æ–°é•œåƒè¿›è¡Œæ›´æ–°ã€‚

### âš ï¸ æ³¨æ„äº‹é¡¹

1. ğŸ”„ å½“å‰ç‰ˆæœ¬å·²ç»åºŸé™¤ redis å­˜å‚¨æŒä¹…åŒ–æ•°æ®ï¼Œåªç”¨äºå†™å…¥ä¸´æ—¶ç¼“å­˜å’Œå¼‚æ­¥é˜Ÿåˆ—ç”¨é€”
2. âš™ï¸ å½“å‰ç‰ˆæœ¬æŒ‡å¼•ä¸­å·²ç»åºŸé™¤ .env è¿›è¡Œé…ç½®ï¼Œé‡‡ç”¨ç¯å¢ƒå˜é‡è¿›è¡Œè¦†ç›–é…ç½®ï¼Œå¦‚æœä½ æœ‰é…ç½®å¯ä»¥åœ¨ docker-compose.yml ä¸­ç§»é™¤ .env æ¡ç›®
3. ğŸª å½“å‰ç‰ˆæœ¬æŒ‡å¼•ä¸­å·²ç»åºŸé™¤ cookie.txt æ–‡ä»¶æ˜ å°„ï¼Œé‡‡ç”¨æ•°æ®åº“è¿›è¡Œå­˜å‚¨ï¼Œå¦‚æœä½ æœ‰é…ç½®å¯ä»¥åœ¨ docker-compose.yml ä¸­ç§»é™¤ cookie.txt æ¡ç›®

## ğŸ’“ æ”¯æŒæœ¬é¡¹ç›®

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œæˆ–è€…å®ƒå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘æ”¯æŒæˆ‘ï¼

### ğŸ’° èµåŠ©æ–¹å¼

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¯æŒè¿™ä¸ªé¡¹ç›®ï¼š

- **Buy me a coffee**: [ä¹°ä¸€æ¯å’–å•¡](https://buymeacoffee.com/ellermister)
- **USDT**: TRC20 `TRjWTbPfQBhHawCD8DrfLGa8ECbhPP6F3b`
- **LTC**: Litecoin `LdH6SxbAq3No9P4zaNR2aGgH9Kr9yfuGHi`
- **çˆ±å‘ç”µ**  [å»æ”¯æŒä¸€ä¸‹](https://afdian.com/a/eller)

ä»»ä½•å½¢å¼çš„æ”¯æŒéƒ½å°†å¸®åŠ©æˆ‘ç»§ç»­æ”¹è¿›å’Œç»´æŠ¤è¿™ä¸ªé¡¹ç›®ï¼Œéå¸¸æ„Ÿè°¢ï¼

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=ellermister/mybili&type=Date)](https://www.star-history.com/#ellermister/mybili&Date)